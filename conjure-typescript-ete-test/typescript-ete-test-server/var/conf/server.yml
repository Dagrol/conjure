# Authentication is provided by the dropwizard-multipass bundle.
# See for details: https://rtfm.yojoe.local/docs/multipass/en/latest/development/dropwizard-multipass.html
# The settings below configure the dropwizard-multipass bundle. To enable auth, uncomment
# the section below. Note that Multipass will only respond to requests over HTTPS, so you
# should stop serving over HTTP if you enable Multipass.
#
#auth:
#  multipass:
#    security:
#      trustStorePath: var/security/trustStore.jks
#    uris:
#      - https://multipass.yojoe.local/release/auth/api
#  oauth2:
#    id: highline
#    secret: highline-secret
#    clientRedirectEndpoint: https://localhost:8443/typescript-ete-test/redirect
#    endpoint: https://multipass.yojoe.local/release/auth/api
#  legacyModeEnabled: false

server:
  rootPath: /api/*
  applicationContextPath: /typescript-ete-test
  adminConnectors: []
  applicationConnectors:
    - type: https
      port: 8443
      excludedProtocols: [SSLv3]
      supportedProtocols: [TLSv1, TLSv1.1, TLSv1.2]
      keyStorePath: var/security/keyStore.jks
      # Sensitive information like keyStorePassword should be encrypted using the encrypted-config-value bundle, see
      # https://github.com/palantir/encrypted-config-value#example-usage for examples.
      keyStorePassword: keystore
      validateCerts: false
      supportedCipherSuites:
        - TLS_RSA_WITH_AES_256_CBC_SHA256
        - TLS_RSA_WITH_AES_256_CBC_SHA
        - TLS_RSA_WITH_3DES_EDE_CBC_SHA
        - TLS_RSA_WITH_AES_128_CBC_SHA256
        - TLS_RSA_WITH_AES_128_CBC_SHA
        - TLS_RSA_WITH_AES_256_GCM_SHA384
        - TLS_RSA_WITH_AES_128_GCM_SHA256
        - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
        - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
        - TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
        - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
        - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
        - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
        - TLS_DHE_RSA_WITH_AES_256_CBC_SHA
        - TLS_DHE_RSA_WITH_AES_128_CBC_SHA
  requestLog:
    appenders:
      - type: file
        archive: true
        archivedFileCount: 15
        archivedLogFilenamePattern: var/log/typescriptetetest-request-%d.log.gz
        currentLogFilename: var/log/typescriptetetest-request.log
        threshold: INFO

logging:
  level: INFO
  appenders:
    - type: file
      archive: true
      archivedFileCount: 50
      archivedLogFilenamePattern: var/log/typescriptetetest-%d.log.gz
      currentLogFilename: var/log/typescriptetetest.log
      logFormat: "%-5p [%d{\"yyyy-MM-dd''T''HH:mm:ss,SSSXXX\",UTC}] traceId=%X{traceId} %c: %m%n%rEx"
