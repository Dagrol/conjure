machine:
  java:
    version: oraclejdk8
  environment:
    TERM: dumb
  node:
    version: 6.3.1

dependencies:
  override:
    - ./gradlew --parallel resolveConfigurations

test:
  override:
    - ./gradlew --parallel build

deployment:
  snapshots:
    branch: develop
    owner: foundry
    commands:
      - git clean -xfd
      - ./gradlew -i artifactoryPublish condaPublish
  releases:
    tag: /[0-9]+(\.[0-9]+)+((-(beta|rc)[0-9]{1,2})(\.[0-9])?)?/
    owner: foundry
    commands:
      - git clean -xfd
      - ./gradlew -i artifactoryPublish condaPublish

