types:
  imports:
    ResourceIdentifier:
      base-type: string
      external: 
        java: com.palantir.ri.ResourceIdentifier
    
    AuthHeader:
      base-type: string
      external:
        java: com.palantir.tokens.AuthHeader

  definitions:
    default-package: com.palantir.foundry.catalog.api
    objects:      
      BackingFileSystem:
        package: com.palantir.foundry.catalog.api.datasets
        fields:
          fileSystemId:
            type: string
            docs: The name by which this file system is identified.
          baseUri: string
          configuration: map<string, string>
  
      Dataset:
        package: com.palantir.foundry.catalog.api.datasets
        fields:
          fileSystemId: string
          rid:
            type: ResourceIdentifier
            docs: Uniquely identifies this dataset.
          
      CreateDatasetRequest:
        fields:
          fileSystemId: string
          path: string

services:
  TestService:
    name: Test Service
    package: test.api
    default-auth: header
    base-path: /catalog
    docs: |
      A Markdown description of the service.

    endpoints:
      getFileSystems:
        http: GET /fileSystems
        returns: map<string, BackingFileSystem>
        docs: |
          Returns a mapping from file system id to backing file system configuration.
          
      createDataset:
        http: POST /datasets
        args:
          request: CreateDatasetRequest
        returns: Dataset

      getDataset:
        http: GET /datasets/{datasetRid}
        args:
          datasetRid: ResourceIdentifier
        returns: optional<Dataset>
        
      getBranches:
        http: GET /datasets/{datasetRid}/branches
        args:
          datasetRid:
            type: ResourceIdentifier
            docs: |
              A valid dataset resource identifier.
        returns: set<string>
